<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">  
    <script src="https://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/echarts/4.0.4/echarts.min.js"></script>
    <script src="https://gallery.echartsjs.com/dep/echarts/map/js/china.js"></script>
    <script src="https://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div id="main" style="width: 100%;height:700px; "></div>
    <script type="text/javascript">
    var myChart = echarts.init(document.getElementById('main'));
    var geoCoordMap = {
        '上海': [121.4648,31.2891],
        '东莞': [113.8953,22.901],
        '东营': [118.7073,37.5513],
        '中山': [113.4229,22.478],
        '临汾': [111.4783,36.1615],
        '临沂': [118.3118,35.2936],
        '丹东': [124.541,40.4242],
        '丽水': [119.5642,28.1854],
        '乌鲁木齐': [87.9236,43.5883],
        '佛山': [112.8955,23.1097],
        '保定': [115.0488,39.0948],
        '兰州': [103.5901,36.3043],
        '包头': [110.3467,41.4899],
        '北京': [116.4551,40.2539],
        '北海': [109.314,21.6211],
        '南京': [118.8062,31.9208],
        '南宁': [108.479,23.1152],
        '南昌': [116.0046,28.6633],
        '南通': [121.1023,32.1625],
        '厦门': [118.1689,24.6478],
        '台州': [121.1353,28.6688],
        '合肥': [117.29,32.0581],
        '呼和浩特': [111.4124,40.4901],
        '咸阳': [108.4131,34.8706],
        '哈尔滨': [127.9688,45.368],
        '唐山': [118.4766,39.6826],
        '嘉兴': [120.9155,30.6354],
        '大同': [113.7854,39.8035],
        '大连': [122.2229,39.4409],
        '天津': [117.4219,39.4189],
        '太原': [112.3352,37.9413],
        '威海': [121.9482,37.1393],
        '宁波': [121.5967,29.6466],
        '宝鸡': [107.1826,34.3433],
        '宿迁': [118.5535,33.7775],
        '常州': [119.4543,31.5582],
        '广州': [113.5107,23.2196],
        '廊坊': [116.521,39.0509],
        '延安': [109.1052,36.4252],
        '张家口': [115.1477,40.8527],
        '徐州': [117.5208,34.3268],
        '德州': [116.6858,37.2107],
        '惠州': [114.6204,23.1647],
        '成都': [103.9526,30.7617],
        '扬州': [119.4653,32.8162],
        '承德': [117.5757,41.4075],
        '拉萨': [91.1865,30.1465],
        '无锡': [120.3442,31.5527],
        '日照': [119.2786,35.5023],
        '昆明': [102.9199,25.4663],
        '杭州': [119.5313,29.8773],
        '枣庄': [117.323,34.8926],
        '柳州': [109.3799,24.9774],
        '株洲': [113.5327,27.0319],
        '武汉': [114.3896,30.6628],
        '汕头': [117.1692,23.3405],
        '江门': [112.6318,22.1484],
        '沈阳': [123.1238,42.1216],
        '沧州': [116.8286,38.2104],
        '河源': [114.917,23.9722],
        '泉州': [118.3228,25.1147],
        '泰安': [117.0264,36.0516],
        '泰州': [120.0586,32.5525],
        '济南': [117.1582,36.8701],
        '济宁': [116.8286,35.3375],
        '海口': [110.3893,19.8516],
        '淄博': [118.0371,36.6064],
        '淮安': [118.927,33.4039],
        '深圳': [114.5435,22.5439],
        '清远': [112.9175,24.3292],
        '温州': [120.498,27.8119],
        '渭南': [109.7864,35.0299],
        '湖州': [119.8608,30.7782],
        '湘潭': [112.5439,27.7075],
        '滨州': [117.8174,37.4963],
        '潍坊': [119.0918,36.524],
        '烟台': [120.7397,37.5128],
        '玉溪': [101.9312,23.8898],
        '珠海': [113.7305,22.1155],
        '盐城': [120.2234,33.5577],
        '盘锦': [121.9482,41.0449],
        '石家庄': [114.4995,38.1006],
        '福州': [119.4543,25.9222],
        '秦皇岛': [119.2126,40.0232],
        '绍兴': [120.564,29.7565],
        '聊城': [115.9167,36.4032],
        '肇庆': [112.1265,23.5822],
        '舟山': [122.2559,30.2234],
        '苏州': [120.6519,31.3989],
        '莱芜': [117.6526,36.2714],
        '菏泽': [115.6201,35.2057],
        '营口': [122.4316,40.4297],
        '葫芦岛': [120.1575,40.578],
        '衡水': [115.8838,37.7161],
        '衢州': [118.6853,28.8666],
        '西宁': [101.4038,36.8207],
        '西安': [109.1162,34.2004],
        '贵阳': [106.6992,26.7682],
        '连云港': [119.1248,34.552],
        '邢台': [114.8071,37.2821],
        '邯郸': [114.4775,36.535],
        '郑州': [113.4668,34.6234],
        '鄂尔多斯': [108.9734,39.2487],
        '重庆': [107.7539,30.1904],
        '九江': [115.9477,29.8001],   
        '洛阳': [112.27,34.41], 
        '上饶': [117.58,28.46],
        '南阳': [112.32,33.00],     
        '宜春': [114.23,27.47], 
        '吉安': [114.58,27.07],
        '新干': [115.21,27.73],
        '周口': [114.38,33.37],     
        '商丘': [115.38,34.26],       
        '信阳': [114.04,32.07],     
        '安阳': [114.21,36.06],   
        '景德镇': [117.31,29.17],     
        '十堰': [110.47,32.40],      
        '恩施': [109.29,30.16],     
        '咸宁': [114.17,29.53],       
        '黄石': [115.06,30.12],     
        '岳阳': [113.06,29.22],   
        '郴州': [113.02,25.46],     
        '永州': [111.37,26.13],       
        '益阳': [112.20,28.36],     
        '怀化': [109.58,27.33],       
        '榆林': [109.47,38.18],   
        '南平': [118.10,26.38], 
        '宁德': [119.31,26.39],     
        '三明': [117.36,26.13],     
        '抚州': [116.34,28.00],  
        '湘西': [109.74,28.31],  
        '金华': [120.0037,29.1028],
        '铜川': [109.0393,35.1947],
        '银川': [106.3586,38.1775],
        '镇江': [119.4763,31.9702],
        '长春': [125.8154,44.2584],
        '长沙': [113.0823,28.2568],
        '长治': [112.8625,36.4746],
        '阳泉': [113.4778,38.0951],
        '青岛': [120.4651,36.3373],
        '韶关': [113.7964,24.7028]

    };
    var BJData = [
        [{name:'新干'},{name:'北京',value:7}],
        [{name:'新干'},{name:'南京',value:7}],
        [{name:'新干'},{name:'南昌',value:6}],
        [{name:'新干'},{name:'成都',value:4}],
        [{name:'新干'},{name:'西安',value:4}],
        [{name:'新干'},{name:'天津',value:4}],
        [{name:'新干'},{name:'上海',value:3}],
        [{name:'新干'},{name:'合肥',value:3}],
        [{name:'新干'},{name:'广州',value:2}],
        [{name:'新干'},{name:'青岛',value:1}],
        [{name:'新干'},{name:'厦门',value:1}],
        [{name:'新干'},{name:'长沙',value:1}],
        [{name:'新干'},{name:'保定',value:1}],
        [{name:'新干'},{name:'济南',value:1}]
    ];
    
    var personData = {
        "新干": [45, "<table><tr><td>&nbsp;保定市&nbsp;</td><td>&nbsp;1&nbsp;</td></tr><tr><td>&nbsp;北京市&nbsp;</td><td>&nbsp;7&nbsp;</td></tr><tr><td>&nbsp;成都市&nbsp;</td><td>&nbsp;4&nbsp;</td></tr><tr><td>&nbsp;广州市&nbsp;</td><td>&nbsp;2&nbsp;</td></tr><tr><td>&nbsp;合肥市&nbsp;</td><td>&nbsp;3&nbsp;</td></tr><tr><td>&nbsp;济南市&nbsp;</td><td>&nbsp;1&nbsp;</td></tr><tr><td>&nbsp;南昌市&nbsp;</td><td>&nbsp;6&nbsp;</td></tr><tr><td>&nbsp;南京市&nbsp;</td><td>&nbsp;7&nbsp;</td></tr><tr><td>&nbsp;青岛市&nbsp;</td><td>&nbsp;1&nbsp;</td></tr><tr><td>&nbsp;厦门市&nbsp;</td><td>&nbsp;1&nbsp;</td></tr><tr><td>&nbsp;上海市&nbsp;</td><td>&nbsp;3&nbsp;</td></tr><tr><td>&nbsp;天津市&nbsp;</td><td>&nbsp;4&nbsp;</td></tr><tr><td>&nbsp;西安市&nbsp;</td><td>&nbsp;4&nbsp;</td></tr><tr><td>&nbsp;长沙市&nbsp;</td><td>&nbsp;1&nbsp;</td></tr></table>"],
        "保定": [1, "<table><tr><td>&nbsp;李伊玲&nbsp;</td><td>&nbsp;华北电力大学（保定）&nbsp;</td><td>&nbsp;电气工程及其自动化&nbsp;</td></tr></table>"],
        "北京": [7, "<table><tr><td>&nbsp;曾松&nbsp;</td><td>&nbsp;北京航空航天大学&nbsp;</td><td>&nbsp;机械工程&nbsp;</td></tr><tr><td>&nbsp;郑思遥&nbsp;</td><td>&nbsp;北京师范大学&nbsp;</td><td>&nbsp;生物科学&nbsp;</td></tr><tr><td>&nbsp;曾宇涛&nbsp;</td><td>&nbsp;北京航空航天大学&nbsp;</td><td>&nbsp;计算机科学与技术&nbsp;</td></tr><tr><td>&nbsp;傅冬琴&nbsp;</td><td>&nbsp;中央财经大学&nbsp;</td><td>&nbsp;电子商务&nbsp;</td></tr><tr><td>&nbsp;陈杰&nbsp;</td><td>&nbsp;北京航空航天大学&nbsp;</td><td>&nbsp;自动化&nbsp;</td></tr><tr><td>&nbsp;邓望晨&nbsp;</td><td>&nbsp;对外经济贸易大学&nbsp;</td><td>&nbsp;金融学（CFA方向）&nbsp;</td></tr><tr><td>&nbsp;崔洋&nbsp;</td><td>&nbsp;北京理工大学&nbsp;</td><td>&nbsp;光电信息工程&nbsp;</td></tr></table>"],
        "成都": [4, "<table><tr><td>&nbsp;邹凌波&nbsp;</td><td>&nbsp;电子科技大学&nbsp;</td><td>&nbsp;光电信息科学与工程&nbsp;</td></tr><tr><td>&nbsp;胡琰&nbsp;</td><td>&nbsp;电子科技大学&nbsp;</td><td>&nbsp;信息安全&nbsp;</td></tr><tr><td>&nbsp;郑干斌&nbsp;</td><td>&nbsp;西安交通大学&nbsp;</td><td>&nbsp;电子信息科学与技术&nbsp;</td></tr><tr><td>&nbsp;曾建新&nbsp;</td><td>&nbsp;电子科技大学&nbsp;</td><td>&nbsp;通信工程&nbsp;</td></tr></table>"],
        "广州": [2, "<table><tr><td>&nbsp;李悠崇&nbsp;</td><td>&nbsp;中山大学&nbsp;</td><td>&nbsp;软件工程&nbsp;</td></tr><tr><td>&nbsp;彭家荣&nbsp;</td><td>&nbsp;华南理工大学&nbsp;</td><td>&nbsp;电气工程及其自动化&nbsp;</td></tr></table>"],
        "合肥": [3, "<table><tr><td>&nbsp;王杰&nbsp;</td><td>&nbsp;合肥工业大学&nbsp;</td><td>&nbsp;微电子&nbsp;</td></tr><tr><td>&nbsp;李吉吉&nbsp;</td><td>&nbsp;合肥工业大学&nbsp;</td><td>&nbsp;医学信息工程&nbsp;</td></tr><tr><td>&nbsp;姚宇林&nbsp;</td><td>&nbsp;合肥工业大学&nbsp;</td><td>&nbsp;风景园林&nbsp;</td></tr></table>"],
        "济南": [1, "<table><tr><td>&nbsp;刘永聪&nbsp;</td><td>&nbsp;山东大学&nbsp;</td><td>&nbsp;工程管理&nbsp;</td></tr></table>"],
        "南昌": [6, "<table><tr><td>&nbsp;邹文超&nbsp;</td><td>&nbsp;南昌大学&nbsp;</td><td>&nbsp;临床医学&nbsp;</td></tr><tr><td>&nbsp;聂子川&nbsp;</td><td>&nbsp;南昌大学&nbsp;</td><td>&nbsp;建筑学&nbsp;</td></tr><tr><td>&nbsp;李成杰&nbsp;</td><td>&nbsp;南昌大学&nbsp;</td><td>&nbsp;临床医学&nbsp;</td></tr><tr><td>&nbsp;邓又铨&nbsp;</td><td>&nbsp;南昌航空大学&nbsp;</td><td>&nbsp;电子信息&nbsp;</td></tr><tr><td>&nbsp;叶远&nbsp;</td><td>&nbsp;南昌大学医学院&nbsp;</td><td>&nbsp;中英临床&nbsp;</td></tr><tr><td>&nbsp;唐佳伟&nbsp;</td><td>&nbsp;江西财经大学&nbsp;</td><td>&nbsp;软件工程&nbsp;</td></tr></table>"],
        "南京": [7, "<table><tr><td>&nbsp;肖玉蓉&nbsp;</td><td>&nbsp;南京师范大学&nbsp;</td><td>&nbsp;金融学&nbsp;</td></tr><tr><td>&nbsp;邓美强&nbsp;</td><td>&nbsp;南京大学&nbsp;</td><td>&nbsp;地质&nbsp;</td></tr><tr><td>&nbsp;何晨辉&nbsp;</td><td>&nbsp;东南大学&nbsp;</td><td>&nbsp;土木工程&nbsp;</td></tr><tr><td>&nbsp;胡子龙&nbsp;</td><td>&nbsp;东南大学&nbsp;</td><td>&nbsp;电气工程&nbsp;</td></tr><tr><td>&nbsp;刘超&nbsp;</td><td>&nbsp;南京航空航天大学&nbsp;</td><td>&nbsp;微电子&nbsp;</td></tr><tr><td>&nbsp;蒋龙鑫&nbsp;</td><td>&nbsp;南京理工大学&nbsp;</td><td>&nbsp;车辆&nbsp;</td></tr><tr><td>&nbsp;沈彦晨&nbsp;</td><td>&nbsp;河海大学&nbsp;</td><td>&nbsp;自然地理与资源环境&nbsp;</td></tr></table>"],
        "青岛": [1, "<table><tr><td>&nbsp;郑若弦&nbsp;</td><td>&nbsp;青岛大学&nbsp;</td><td>&nbsp;自动化&nbsp;</td></tr></table>"],
        "厦门": [1, "<table><tr><td>&nbsp;李志浩&nbsp;</td><td>&nbsp;厦门大学&nbsp;</td><td>&nbsp;海洋技术&nbsp;</td></tr></table>"],
        "上海": [3, "<table><tr><td>&nbsp;傅佳棋&nbsp;</td><td>&nbsp;上海理工大学&nbsp;</td><td>&nbsp;医学影像技术&nbsp;</td></tr><tr><td>&nbsp;杨昱&nbsp;</td><td>&nbsp;上海财经大学&nbsp;</td><td>&nbsp;统计学&nbsp;</td></tr><tr><td>&nbsp;周婉青&nbsp;</td><td>&nbsp;上海财经大学&nbsp;</td><td>&nbsp;工商管理&nbsp;</td></tr></table>"],
        "天津": [4, "<table><tr><td>&nbsp;黄玲惠&nbsp;</td><td>&nbsp;天津医科大学&nbsp;</td><td>&nbsp;医学影像学&nbsp;</td></tr><tr><td>&nbsp;邓昌&nbsp;</td><td>&nbsp;天津大学&nbsp;</td><td>&nbsp;电气工程及其自动化&nbsp;</td></tr><tr><td>&nbsp;杨晚诚&nbsp;</td><td>&nbsp;天津大学&nbsp;</td><td>&nbsp;自动化&nbsp;</td></tr><tr><td>&nbsp;朱思媛&nbsp;</td><td>&nbsp;天津财经大学&nbsp;</td><td>&nbsp;电子商务&nbsp;</td></tr></table>"],
        "西安": [4, "<table><tr><td>&nbsp;熊炜琦 &nbsp;</td><td>&nbsp;西安交通大学&nbsp;</td><td>&nbsp;数学&nbsp;</td></tr><tr><td>&nbsp;曾萧萧&nbsp;</td><td>&nbsp;西北工业大学&nbsp;</td><td>&nbsp;自动化&nbsp;</td></tr><tr><td>&nbsp;文新强&nbsp;</td><td>&nbsp;西北工业大学&nbsp;</td><td>&nbsp;机械电子工程&nbsp;</td></tr><tr><td>&nbsp;曾虔缘&nbsp;</td><td>&nbsp;西安电子科技大学&nbsp;</td><td>&nbsp;通信工程&nbsp;</td></tr></table>"],
        "长沙": [1, "<table><tr><td>&nbsp;赵丹娜&nbsp;</td><td>&nbsp;中南大学&nbsp;</td><td>&nbsp;粉体材料科学与工程&nbsp;</td></tr></table>"]
    };

    
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push([
                    {
                        coord:fromCoord,
                        value: dataItem[0].value
                    },
                    {
                        coord: toCoord,
                        value: dataItem[1].value
                    }
                ]);
            }
        }
        return res;
    };

    var color = ['#a6c84c', '#ffa022', '#46bee9'];
    var series = [];
    [['新干', BJData]].forEach(function (item, i) {
        series.push(
        {
            type: 'lines',
            zlevel: 2,
            effect: {
                show: true,
                period: 2, //箭头指向速度，值越小速度越快
                trailLength: 0.02,//特效尾迹长度[0,1]值越大，尾迹越长重
                symbol:'arrow',//箭头图标
                symbolSize: 5,//图标大小
            },
            lineStyle: {
                normal: {
                    width: 1,//尾迹线条宽度
                    opacity: 0,//尾迹线条透明度
                    curveness: 0 //尾迹线条曲直度
                }
            },
            
            data: convertData(item[1])
        },
        {
            type: 'effectScatter',
            coordinateSystem: 'geo',
            zlevel: 2,
            rippleEffect: {//涟漪特效
                period:3,//动画时间，值越小速度越快
                brushType: 'stroke', //波纹绘制方式 stroke, fill
                scale: 4 //波纹圆环最大限制，值越大波纹越大
            },
            label: {
                normal: {
                    show: true,
                    position: 'right',//显示位置
                    offset:[5, 0], //偏移设置
                    formatter: '{b}' //圆环显示文字
                },
                emphasis: {
                    show: true
                }
            },
            symbol: 'circle',
            symbolSize: function (val) {
                return 2 + val[2] * 2; //圆环大小
            },
            itemStyle: {
                normal: {
                    show: false,
                    color: '#f00'
                }
            },
            data: item[1].map(function (dataItem) {
                return {
                    name: dataItem[1].name,
                    value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                };
            }),
        },     
        {
            type: 'scatter',
            coordinateSystem: 'geo',
            zlevel: 2,
            rippleEffect: {
                period:2,
                brushType: 'stroke',
                scale: 4
            },
            label: {
                normal: {
                    show: true,
                    position: 'right',
    //			                offset:[5, 0],
                    
                    color:'#00ffff',
                    formatter: '{b}',
                    textStyle: {
                        color:"#00ffff"
                    }
                },
                emphasis: {
                    show: true
                }
            },
            symbol: 'pin',
            symbolSize:30,
            itemStyle: {
                normal: {
                    show: true,
                    color: '#9966cc'
                }
            },
            data:[{
                name: item[0],
                value: geoCoordMap[item[0]].concat([100]),
            }],
        }
        );
    });

    option = {
        backgroundColor: '#404a59',
        title: {
            text: '高三17班本科学校及专业',
            textStyle:{
                color:'#fff',
                fontSize:20
            },
            padding:[30,20,20,20],
            left: 'center',
            
        },
        tooltip : {
            show:true,
            trigger : 'item',
            backgroundColor:'rgba(12, 204, 104, 0.92)',
            borderColor:'#FFFFCC',
            showDelay : 0,
            hideDelay : 0,
            enterable:true,
            transitionDuration : 0,
            extraCssText:'z-index:100',
            formatter : function(params, ticket, callback) {
                //根据业务自己拓展要显示的内容
                var res = "";
                var name = params.name;
                var value = params.value;
                var item = personData[name];
                console.log(item);
                var num = item[0];
                var pdata = item[1];
                if(name == "新干"){
                    name = "17班";
                }
                res = "<span style='color: blue; font-weight:bold; text-align:center !important;'>"+name+": 共"+num+"人</span><br/>"+pdata;
                return res;
            }
        },
        visualMap: { //图例值控制
            min : 0,
            max : 8,
            calculable : true,
            color: ['#FF4700','orange','cyan','royal blue'],
            textStyle:{
                color:'#fff'
            }
        },
        geo: {
            map: 'china',
            label: {
                emphasis: {
                    show: false
                }
            },
            roam: true, //是否允许缩放
            layoutCenter: ['50%', '53%'], //地图位置
            layoutSize:"108%",
            itemStyle: {
                normal: {
                    color: 'rgba(51, 69, 89, .5)', //地图背景色
                    borderColor: 'rgba(100,149,237,1)' //省市边界线
                },
                emphasis: {
                    color: 'rgba(37, 43, 61, .5)'//悬浮背景
                }
            }
        },                      
        series: series,
        toolbox: {
            itemSize: 15,
            itemGap: 15,
            showTitle: true,
            top: 30,
            right: '10%',
            iconStyle: {
                borderColor: 'white',
                borderWidth: 2,
                borderType: 'solid'
            },
            feature:{
                saveAsImage:{},
                restore:{}
            }
        }
    };

    var counts = option.series[0].data.length; //获取所有闪动圆环数量
    var dataIndex = 0;
    //让圆环的提示框自动触发轮播显示
    // function autoHoverTip(){
    //    for(var i = 0;i<counts;i++){
    //        (function (i) {
    //              ts = setTimeout(function () {
    //                     myChart.dispatchAction({
    //                         type: 'showTip',
    //                         seriesIndex: 1,
    //                         dataIndex: i
    //                     });
    //                  }, 5000*i);
    //             })(i);
    //     }
    // }
    
    // setTimeout(function() {
    //      autoHoverTip();
    //      tv = setInterval(autoHoverTip, counts*5600);
    // }, 500);

    myChart.setOption(option);
    </script>
</body>

</html>